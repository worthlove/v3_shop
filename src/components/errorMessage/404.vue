<template>
  <div class="not-container">
    <!--<img alt="404" class="not-img" src="@/assets/images/404.png"/>-->
    <div id="lottie404" class="not-img"></div>
    <div class="not-detail">
      <h2>404</h2>
      <h4>æŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨~ğŸ¤·â€â™‚ï¸ğŸ¤·â€â™€ï¸</h4>
      <el-button type="primary" @click="router.back"> è¿”å›ä¸Šä¸€é¡µ</el-button>
    </div>
  </div>
</template>

<script lang="ts" setup>
import lottie from "lottie-web";
import lottie404 from "@/assets/lottie_json/404é”™è¯¯.json";

const router = useRouter();

let animation_lottie404;
const initLottie = () => {
  animation_lottie404 = lottie.loadAnimation({
    container: document.getElementById("lottie404") as Element,
    renderer: "svg",
    loop: true,
    autoplay: true,
    animationData: lottie404
  });
  animation_lottie404.play();
}

onMounted(() => {
  // æ£€æŸ¥å½“å‰ URL æ˜¯å¦åŒ…å« #reloaded ç‰‡æ®µ
  if (location.href.indexOf("#reloaded") == -1) {
    // å¦‚æœä¸åŒ…å«ï¼Œå°† #reloaded é™„åŠ åˆ°å½“å‰ URL ä¸Š
    location.href = location.href + "#reloaded";
    // é‡æ–°åŠ è½½é¡µé¢
    window.location.reload();
  } else {
    // å¦‚æœå·²ç»åŒ…å« #reloadedï¼Œåˆå§‹åŒ– Lottie åŠ¨ç”»
    initLottie();
  }
})
</script>

<style lang="scss" scoped>
@import "@/components/errorMessage/index.scss";
</style>
